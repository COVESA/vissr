<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.103.1" />
    <meta name="description" content="">


    <link rel="shortcut icon" href="/vissr/images/fav.png" type="image/x-icon" />

    <title>VISSR Build System :: COVESA VISSv2 Reference Implementation (vissr)</title>

    
    <link href="/vissr/css/nucleus.css?1729001048" rel="stylesheet">
    <link href="/vissr/css/fontawesome-all.min.css?1729001048" rel="stylesheet">
    <link href="/vissr/css/hybrid.css?1729001048" rel="stylesheet">
    <link href="/vissr/css/featherlight.min.css?1729001048" rel="stylesheet">
    <link href="/vissr/css/perfect-scrollbar.min.css?1729001048" rel="stylesheet">
    <link href="/vissr/css/auto-complete.css?1729001048" rel="stylesheet">
    <link href="/vissr/css/atom-one-dark-reasonable.css?1729001048" rel="stylesheet">
    <link href="/vissr/css/theme.css?1729001048" rel="stylesheet">
    <link href="/vissr/css/hugo-theme.css?1729001048" rel="stylesheet">
    
    <link href="/vissr/css/theme-blue.css?1729001048" rel="stylesheet">
    
    

    <script src="/vissr/js/jquery-3.3.1.min.js?1729001048"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/vissr/build-system/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://covesa.github.io/vissr/">
  <img src="/vissr/images/vissv2.png">
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/vissr/js/lunr.min.js?1729001048"></script>
<script type="text/javascript" src="/vissr/js/auto-complete.js?1729001048"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/covesa.github.io\/vissr\/";
    
</script>
<script type="text/javascript" src="/vissr/js/search.js?1729001048"></script>

    
  </div>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/vissr/build-system/" title="VISSR Build System" class="dd-item
        
        active
        
        ">
      <a href="/vissr/build-system/">
          VISSR Build System
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vissr/datastore/" title="VISSR Data Storage" class="dd-item
        
        
        
        ">
      <a href="/vissr/datastore/">
          VISSR Data Storage
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/vissr/datastore/memcached/" title="VISSR Memcached" class="dd-item
        
        
        
        ">
      <a href="/vissr/datastore/memcached/">
          VISSR Memcached
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vissr/datastore/redis/" title="VISSR Redis" class="dd-item
        
        
        
        ">
      <a href="/vissr/datastore/redis/">
          VISSR Redis
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vissr/datastore/sqlite/" title="VISSR SQLite" class="dd-item
        
        
        
        ">
      <a href="/vissr/datastore/sqlite/">
          VISSR SQLite
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vissr/datastore/apache-iotdb/" title="WAII Apache IoTDB" class="dd-item
        
        
        
        ">
      <a href="/vissr/datastore/apache-iotdb/">
          WAII Apache IoTDB
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vissr/feeder/" title="VISSR Feeders" class="dd-item
        
        
        
        ">
      <a href="/vissr/feeder/">
          VISSR Feeders
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vissr/pocs/" title="VISSR POCs" class="dd-item
        
        
        
        ">
      <a href="/vissr/pocs/">
          VISSR POCs
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/vissr/pocs/poc2/" title="Next POC..." class="dd-item
        
        
        
        ">
      <a href="/vissr/pocs/poc2/">
          Next POC...
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vissr/pocs/poc1/" title="Vehicle.Speed subscription example" class="dd-item
        
        
        
        ">
      <a href="/vissr/pocs/poc1/">
          Vehicle.Speed subscription example
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vissr/tools/" title="VISSR Tools" class="dd-item
        
        
        
        ">
      <a href="/vissr/tools/">
          VISSR Tools
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vissr/client/" title="VISSv2 Clients" class="dd-item
        
        
        
        ">
      <a href="/vissr/client/">
          VISSv2 Clients
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vissr/docker-step-by-step/" title="VISSv2 Docker" class="dd-item
        
        
        
        ">
      <a href="/vissr/docker-step-by-step/">
          VISSv2 Docker
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vissr/peripheral-components/" title="VISSv2 peripheral components" class="dd-item
        
        
        
        ">
      <a href="/vissr/peripheral-components/">
          VISSv2 peripheral components
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vissr/server/" title="VISSv2 Server" class="dd-item
        
        
        
        ">
      <a href="/vissr/server/">
          VISSv2 Server
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/vissr/server/access-control-servers/" title="VISSv2 Access Control Servers" class="dd-item
        
        
        
        ">
      <a href="/vissr/server/access-control-servers/">
          VISSv2 Access Control Servers
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://github.com/covesa/vissr"><i class='fab fa-github'></i> Github repo</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://github.com/covesa/vissr/edit/master/tutorial/content/build-system/_index.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            <a href='/vissr/'>COVESA Vehicle Information Service Specification ver 3 Reference Implementation Tutorial</a> > VISSR Build System
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#installing-golang">Installing Golang</a></li>
    <li><a href="#building-and-running">Building and running</a>
      <ul>
        <li><a href="#logging">Logging</a></li>
        <li><a href="#transport-protocols">Transport protocols</a></li>
        <li><a href="#go-modules">Go modules</a></li>
      </ul>
    </li>
    <li><a href="#docker">Docker</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              VISSR Build System
            </h1>
          

        



	<h2 id="installing-golang">Installing Golang</h2>
<p>Most of the code at this repository is written in Golang, so in order to use this repo Golang must be installed on the computer.</p>
<p>Searching for &ldquo;install golang&rdquo; gives many hits, of which this is one:</p>
<p><a href="https://www.cyberciti.biz/faq/how-to-install-gol-ang-on-ubuntu-linux/">How to install Go (golang) on Ubuntu Linux</a>.</p>
<p>For other operating systems <a href="https://go.dev/doc/install">this</a> may be helpful.</p>
<p>This project requires Go version 1.13 or above, make sure your GOROOT and GOPATH are correctly configured.
Since this project uses Go modules all dependencies will automatically download when building the project the first time.</p>
<h2 id="building-and-running">Building and running</h2>
<p>As several of the Golang based Sw components on this repo can be started with command line input to configure its behavior,
it is suitable to first build it (in the directory of the source code)</p>
<p>$ go build</p>
<p>If the image is to be run on another platform, golang has ample cross-compilation capabilities, more can be learned <a href="https://opensource.com/article/21/1/go-cross-compiling">here</a>.
To cross-compile, the command could look like the below.</p>
<p>env GOOS=linux GOARCH=arm64 go build -o vissv2server</p>
<p>To run it the command looks like:</p>
<p>$ ./&rsquo;name-of-executable&rsquo; &lsquo;any-command-line-config-input&rsquo;</p>
<p>If the SwC supports command line configuration input it is possible to add &ldquo;-h&rdquo; (no quotes) on the command line, which will then show a help text.
Checking the first lines of the main() function in the source code is another possibility to find out.
If there is any calls to the &ldquo;github.com/akamensky/argparse&rdquo; lib then it is used.</p>
<p>As the configurations have a default it is always possible to run it without adding any comand line configuration input.
The configuration possibilities of the different SwCs are described in the respective chapters of this tutorial.</p>
<p>The server consists of several &ldquo;actors&rdquo;, see the <a href="https://github.com/covesa/vissr">README</a> Overview chapter.
These used to be built as separate processes that communicated over the Websockets protocol.
To simplify the building process of thesesoftware components the script W3CServer.sh was created.
After the refactoring of these SwCs into one process with ech actor running as a separate thread,
it became more convenient to build without this script, but it is still <a href="https://github.com/covesa/vissr/blob/master/W3CServer.sh">avaliable</a>.
For more details, see the &ldquo;Multi-process vs single-process server implementation&rdquo; chapter in the README.</p>
<p>There are multiple Software components on this repo, such as feeders, simulators, the DCT tool that are to be built as separate excutables.
If it is forgotten to be mentiond in the README, one way of determining whether a separate build is needed or not is to check the package statement in the source code.
If it says &ldquo;package main&rdquo; it is a separate executable and shall then be built and run as described above.</p>
<h3 id="logging">Logging</h3>
<p>Logging can be command line configured at startup.</p>
<ul>
<li>logging level can be set to either of [trace, debug, info, warn, error, fatal, panic].</li>
<li>logging output destination. It can either be written to file, or directed to standard output.</li>
</ul>
<p>The levels currently used are mainly info, warning, error. Info is appropriate during testing and debugging, while error is appropriate when performance is important.</p>
<h3 id="transport-protocols">Transport protocols</h3>
<p>Besides the transport protocols</p>
<ul>
<li>HTTP</li>
<li>Websocke</li>
<li>MQTT
that the specification lists, this server also supports</li>
<li>gRPC
They are all except MQTT activated by the server per default.
To enable MQTT, or disable any other, the string array serverComponents in the vissv2server.go file contains a list of the components that are spawned on
separate threads by the main server process, and these can be commented in or out before building the server.
For the server to be operationable, the service manager, and at least one transport protocol must not be commented out.</li>
</ul>
<h3 id="go-modules">Go modules</h3>
<p>Go modules are used in multiple places in this project, below follows some commands that may be helpful in managing  this.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ go mod tidy
</span></span></code></pre></div><p>To update the dependencies to latest run</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ go get -u ./...
</span></span></code></pre></div><p>If working with a fix or investigating something in a dependency, you can have a local fork by adding a replace directive in the go.mod file, see below examples.</p>
<pre tabindex="0"><code>replace example.com/some/dependency =&gt; example.com/some/dependency v1.2.3 
replace example.com/original/import/path =&gt; /your/forked/import/path
replace example.com/project/foo =&gt; ../foo
</code></pre><p>For more information see <a href="https://github.com/golang/go/wiki/Modules#when-should-i-use-the-replace-directive">https://github.com/golang/go/wiki/Modules#when-should-i-use-the-replace-directive</a></p>
<h2 id="docker">Docker</h2>
<p>The server can also be built and launched using docker and docker-compose, see the <a href="https://github.com/covesa/vissr/tree/master/docker">Docker README</a>.
Current example builds and runs using the redis state storage together with an implementation of the feeder interfacing
the remotiveLabs broker in the cloud.<a href="https://github.com/covesa/vissr/tree/master/feeder/feeder-rl">feeder-rl</a> .</p>





<footer class=" footline" >
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/vissr/" title="COVESA Vehicle Information Service Specification ver 3 Reference Implementation Tutorial"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/vissr/datastore/" title="VISSR Data Storage" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/vissr/js/clipboard.min.js?1729001048"></script>
    <script src="/vissr/js/perfect-scrollbar.min.js?1729001048"></script>
    <script src="/vissr/js/perfect-scrollbar.jquery.min.js?1729001048"></script>
    <script src="/vissr/js/jquery.sticky.js?1729001048"></script>
    <script src="/vissr/js/featherlight.min.js?1729001048"></script>
    <script src="/vissr/js/highlight.pack.js?1729001048"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/vissr/js/modernizr.custom-3.6.0.js?1729001048"></script>
    <script src="/vissr/js/learn.js?1729001048"></script>
    <script src="/vissr/js/hugo-learn.js?1729001048"></script>
    
        
            <script src="/vissr/mermaid/mermaid.js?1729001048"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>
