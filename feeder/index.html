<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.103.1" />
    <meta name="description" content="">


    <link rel="shortcut icon" href="/vissr/images/fav.png" type="image/x-icon" />

    <title>VISSR Feeders :: COVESA VISSv2 Reference Implementation (vissr)</title>

    
    <link href="/vissr/css/nucleus.css?1741089790" rel="stylesheet">
    <link href="/vissr/css/fontawesome-all.min.css?1741089790" rel="stylesheet">
    <link href="/vissr/css/hybrid.css?1741089790" rel="stylesheet">
    <link href="/vissr/css/featherlight.min.css?1741089790" rel="stylesheet">
    <link href="/vissr/css/perfect-scrollbar.min.css?1741089790" rel="stylesheet">
    <link href="/vissr/css/auto-complete.css?1741089790" rel="stylesheet">
    <link href="/vissr/css/atom-one-dark-reasonable.css?1741089790" rel="stylesheet">
    <link href="/vissr/css/theme.css?1741089790" rel="stylesheet">
    <link href="/vissr/css/tabs.css?1741089790" rel="stylesheet">
    <link href="/vissr/css/hugo-theme.css?1741089790" rel="stylesheet">
    
    <link href="/vissr/css/theme-blue.css?1741089790" rel="stylesheet">
    
    

    <script src="/vissr/js/jquery-3.3.1.min.js?1741089790"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/vissr/feeder/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://covesa.github.io/vissr/">
  <img src="/vissr/images/vissv2.png">
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/vissr/js/lunr.min.js?1741089790"></script>
<script type="text/javascript" src="/vissr/js/auto-complete.js?1741089790"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/covesa.github.io\/vissr\/";
    
</script>
<script type="text/javascript" src="/vissr/js/search.js?1741089790"></script>

    
  </div>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/vissr/build-system/" title="VISSR Build System" class="dd-item
        
        
        
        ">
      <a href="/vissr/build-system/">
          VISSR Build System
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/vissr/build-system/hello-world/" title="VISSR Hello World example" class="dd-item
        
        
        
        ">
      <a href="/vissr/build-system/hello-world/">
          VISSR Hello World example
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vissr/client/" title="VISSR Clients" class="dd-item
        
        
        
        ">
      <a href="/vissr/client/">
          VISSR Clients
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vissr/datastore/" title="VISSR Data Storage" class="dd-item
        
        
        
        ">
      <a href="/vissr/datastore/">
          VISSR Data Storage
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/vissr/datastore/apache-iotdb/" title="VISSR Apache IoTDB" class="dd-item
        
        
        
        ">
      <a href="/vissr/datastore/apache-iotdb/">
          VISSR Apache IoTDB
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vissr/datastore/memcached/" title="VISSR Memcached" class="dd-item
        
        
        
        ">
      <a href="/vissr/datastore/memcached/">
          VISSR Memcached
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vissr/datastore/redis/" title="VISSR Redis" class="dd-item
        
        
        
        ">
      <a href="/vissr/datastore/redis/">
          VISSR Redis
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vissr/datastore/sqlite/" title="VISSR SQLite" class="dd-item
        
        
        
        ">
      <a href="/vissr/datastore/sqlite/">
          VISSR SQLite
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vissr/docker-step-by-step/" title="VISSR Docker" class="dd-item
        
        
        
        ">
      <a href="/vissr/docker-step-by-step/">
          VISSR Docker
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vissr/feeder/" title="VISSR Feeders" class="dd-item
        
        active
        
        ">
      <a href="/vissr/feeder/">
          VISSR Feeders
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vissr/peripheral-components/" title="VISSR peripheral components" class="dd-item
        
        
        
        ">
      <a href="/vissr/peripheral-components/">
          VISSR peripheral components
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vissr/pocs/" title="VISSR POCs" class="dd-item
        
        
        
        ">
      <a href="/vissr/pocs/">
          VISSR POCs
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/vissr/pocs/poc2/" title="Next POC..." class="dd-item
        
        
        
        ">
      <a href="/vissr/pocs/poc2/">
          Next POC...
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vissr/pocs/poc1/" title="Vehicle.Speed subscription example" class="dd-item
        
        
        
        ">
      <a href="/vissr/pocs/poc1/">
          Vehicle.Speed subscription example
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vissr/server/" title="VISSR Server" class="dd-item
        
        
        
        ">
      <a href="/vissr/server/">
          VISSR Server
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/vissr/server/access-control-servers/" title="VISSR Access Control Servers" class="dd-item
        
        
        
        ">
      <a href="/vissr/server/access-control-servers/">
          VISSR Access Control Servers
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vissr/server/binary-tree-config/" title="VISSR binary tree configuration" class="dd-item
        
        
        
        ">
      <a href="/vissr/server/binary-tree-config/">
          VISSR binary tree configuration
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vissr/tools/" title="VISSR Tools" class="dd-item
        
        
        
        ">
      <a href="/vissr/tools/">
          VISSR Tools
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vissr/xtra/" title="VISSR Xtra Information" class="dd-item
        
        
        
        ">
      <a href="/vissr/xtra/">
          VISSR Xtra Information
          
      </a>
      
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://github.com/covesa/vissr"><i class='fab fa-github'></i> Github repo</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://github.com/covesa/vissr/edit/master/tutorial/content/feeder/_index.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            <a href='/vissr/'>COVESA Vehicle Information Service Specification version 3 Reference Implementation Tutorial</a> > VISSR Feeders
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#data-storage-interface">Data storage interface</a></li>
    <li><a href="#simulated-vehicle-data-sources">Simulated vehicle data sources</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              VISSR Feeders
            </h1>
          

        



	<p>A feeder is a Sw component that needs to implement the following tasks, depending on which template version they implement:</p>
<p>The soon to be deprecated template version 1:</p>
<ul>
<li>Use an interface to the data storage for writing and reading data.</li>
<li>Use an interface to the underlying vehicle interface for reading and writing data.</li>
<li>Translate data from the format used in the &ldquo;VSS domain&rdquo; to the format used in the &ldquo;Vehicle domain&rdquo;, and vice versa.</li>
</ul>
<p>Template version 2:</p>
<ul>
<li>Use an interface to the data storage for writing data.</li>
<li>Use an interface to the underlying vehicle interface for reading and writing data.</li>
<li>Translate data from the format used in the &ldquo;VSS domain&rdquo; to the format used in the &ldquo;Vehicle domain&rdquo;, and vice versa.</li>
<li>Use an Unix domain socket interface for receiving &ldquo;client set data&rdquo; from the server.</li>
</ul>
<p>Template version 3:</p>
<ul>
<li>Use an interface to the data storage for writing data.</li>
<li>Use an interface to the underlying vehicle interface for reading and writing data.</li>
<li>Translate data from the format used in the &ldquo;VSS domain&rdquo; to the format used in the &ldquo;Vehicle domain&rdquo;, and vice versa.</li>
<li>Use an Unix domain socket interface for receiving &ldquo;client set data&rdquo; from the server.</li>
<li>Use the UDS interface to receive instructions from the server on which signals to begin/stop issuing events after writing to the data store.</li>
<li>Use the UDS interface to issue events when instructed by he server to do so.</li>
</ul>
<p>The SW architecture shown in figure 1 shows a logical partition into the three main tasks of template version 1.
The architecture shown handle all its communication with the server via the state storage.
This leads to a polling paradigm and thus a potential latency and performance weakness.
This architecture is therefore not found on the master branch, but available on the datastore-poll branch.
There is still a feeder design for this in the feeder-template/feederv1 directory.
<img src="/vissr/images/feeder-sw-design-v1.jpg?width=50pc" alt="Feeder Sw architecture, unoptimized polling"></p>
<ul>
<li>Figure 1. Feeder software architecture unoptimized polling</li>
</ul>
<p>An improved architecture that eliminates the mentioned weaknesses for data flowing in the direction from the server to the feeder (i. e client write requests)
is shown in figure 2. For write requests the server communicates directly over an IPC channel with the feeder, thus removing the need for the feeder to poll
the state storage to find new write requests.
<img src="/vissr/images/feeder-sw-design-v2.jpg?width=50pc" alt="Feeder Sw architecture, optimized polling"></p>
<ul>
<li>Figure 2. Feeder software architecture optimized polling</li>
</ul>
<p>A feeder implementing this solution can be found in the feeder-template/feederv2 directory.
This feeder can be configured to either use an SQLite, or a Redis state storage interface, please see the Datastore chapter for details.</p>
<p>However, the solution implemented in the feederv2 template does not support that the server also can replace the polling with a more effective event based solution.
For this the feeder implementation in the feeder-template/feederv3 directory needs to be used.</p>
<p>The server is able via the interface to detect whether a feeder implements version 2 or 3 of the interface.
In case of version 2 it keeps poling of the data store, while for version 3 it relies on event signalling from the feeder instead.
For more details of this interface, see the <a href="/vissr/server/#feeder-interface">VISSR Server:Feeder interface</a> chapter.</p>
<p>The feeder translation task is divided into a mapping of the signal name, and a possible scaling of the value.
The instructions for how to do this is encoded into one or more configuration files that the feeder reads at startup.
There are two versions of the feeder instructions, being used in template feederv1 and feederv2, respectively.</p>
<p>In version 1 this file only contains a signal name mapping, while version 2 supports also scaling instructions.
For more about the telpate feeders, see the README in <a href="https://github.com/covesa/vissr/tree/master/feeder/feeder-template">feeder-template</a> directory.</p>
<p>An OEM wanting to deploy the VISSv2 tech stack needs to implement the Vehicle interface of the feeder, e. g. to implement a CAN bus interface.
In the template feeders the Vehicle interface contains a minimal signal simulator that generates random values for the signals it is configured to support.
All  of that code should be removed and replaced by the code implementing the new interface client.</p>
<p>Besides the feeder templates there is also an <a href="https://github.com/covesa/vissr/tree/master/feeder/feeder-rl">rl-feeder</a>
where the Vehicle interface is implemented to connect to a RemotiveLabs broker.
<a href="https://remotivelabs.com/">RemotiveLabs</a> has a public cloud version of its broker that can be used to replay trip data available in VSS format.</p>
<p>There is also an External Vehicle Interface Client <a href="https://github.com/covesa/vissr/tree/master/feeder/feeder-evic">EVIC</a>
feeder that enables the interface client to be implemented in a separate executable.</p>
<h2 id="data-storage-interface">Data storage interface</h2>
<p>If the feeder is implemented to support multiple data base solutions, see the Data store chapter for which are currently supported,
then to configure which to use could be done at startup via a CLI parameter,
see e. g. how it is done in the feeder/feeder-template/feederv3/feederv3.go.
There also the interface implementations to some DB solutions can be seen in the method statestorageSet(path, val, ts).</p>
<h2 id="simulated-vehicle-data-sources">Simulated vehicle data sources</h2>
<p>The feederv2 template contains two different simulation mechanisms that are selected via the command line configuration parameters.</p>
<p>The one configured by &ldquo;internal&rdquo; uses the conversion instructions data as input for which signals to simulate, which are then randomly selected and set to random values.</p>
<p>The other configured by &ldquo;vssjson&rdquo; tries to read the file &ldquo;tripdata.json&rdquo;, which must have a format as found in the example file. s seen in that file it contains an array of signal path names, and for each signal it contains an array of datapoints, i.e. timestamps and values. The data points are replayed at a constant frequency of 1 Hz. To change the frequency the time.Sleep input in the code must be changed and recompiled. This sets the rquirement on the data point arrays that their values must have been captured at this frequency, or recalculated to this frequency. Each data point array must have the same length. The simulator waps around and starts again from the beginning after reaching the end.</p>
<p>The signal names must be VSS paths as they are not processed by the conversion engine.
Extending the model to instead expect &ldquo;vehicle domain signals&rdquo; (like CAN signal data) should be a simple coding exercise for anyone preferring that.</p>





<footer class=" footline" >
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/vissr/docker-step-by-step/" title="VISSR Docker"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/vissr/peripheral-components/" title="VISSR peripheral components" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/vissr/js/clipboard.min.js?1741089790"></script>
    <script src="/vissr/js/perfect-scrollbar.min.js?1741089790"></script>
    <script src="/vissr/js/perfect-scrollbar.jquery.min.js?1741089790"></script>
    <script src="/vissr/js/jquery.sticky.js?1741089790"></script>
    <script src="/vissr/js/featherlight.min.js?1741089790"></script>
    <script src="/vissr/js/highlight.pack.js?1741089790"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/vissr/js/modernizr.custom-3.6.0.js?1741089790"></script>
    <script src="/vissr/js/learn.js?1741089790"></script>
    <script src="/vissr/js/hugo-learn.js?1741089790"></script>
    
        
            <script src="/vissr/mermaid/mermaid.js?1741089790"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>
